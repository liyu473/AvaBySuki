<sukiUi:SukiWindow
    x:Class="AvaBySuki.Views.MainWindow"
    xmlns="https://github.com/avaloniaui"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:i="https://github.com/projektanker/icons.avalonia"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    xmlns:models="using:AvaBySuki.Models"
    xmlns:sukiUi="clr-namespace:SukiUI.Controls;assembly=SukiUI"
    xmlns:vm="using:AvaBySuki.ViewModels"
    Title="AvaBySuki"
    d:DesignHeight="450"
    d:DesignWidth="800"
    x:DataType="vm:MainWindowViewModel"
    BackgroundStyle="Bubble"
    Icon="/Assets/avalonia-logo.ico"
    WindowState="Maximized"
    mc:Ignorable="d">

    <sukiUi:SukiWindow.Hosts>
        <sukiUi:SukiDialogHost x:Name="DialogHost" />
        <sukiUi:SukiToastHost x:Name="ToastHost" />
    </sukiUi:SukiWindow.Hosts>

    <sukiUi:SukiWindow.RightWindowTitleBarControls>
        <Button Classes="WindowControlsButton">
            <i:Icon FontSize="16" Value="mdi-cog" />
            <Button.Flyout>
                <Flyout>
                    <Panel>
                        <Border
                            Margin="20"
                            BoxShadow="{DynamicResource SukiPopupShadow}"
                            CornerRadius="20" />

                        <Border
                            MinWidth="350"
                            MinHeight="300"
                            Margin="20"
                            Padding="10"
                            Background="{DynamicResource SukiCardBackground}"
                            BorderBrush="{DynamicResource SukiLightBorderBrush}"
                            BorderThickness="1"
                            ClipToBounds="True"
                            CornerRadius="15">
                            <TextBlock
                                FontSize="24"
                                FontWeight="Bold"
                                Text="Flyout Content Here" />
                        </Border>
                    </Panel>
                </Flyout>
            </Button.Flyout>
        </Button>
    </sukiUi:SukiWindow.RightWindowTitleBarControls>

    <sukiUi:SukiSideMenu
        IsSearchEnabled="True"
        ItemsSource="{Binding Pages}"
        SelectedItem="{Binding ActivePage}">

        <!--  定义如何渲染 PageInfo 的 PageContent  -->
        <sukiUi:SukiSideMenu.DataTemplates>
            <DataTemplate DataType="models:PageInfo">
                <ContentControl Content="{Binding PageContent}">
                    <!--  内容过渡动画  -->
                    <ContentControl.Transitions>
                        <Transitions>
                            <DoubleTransition
                                Easing="CubicEaseInOut"
                                Property="Opacity"
                                Duration="0:0:0.25" />
                            <TransformOperationsTransition
                                Easing="CubicEaseOut"
                                Property="RenderTransform"
                                Duration="0:0:0.3" />
                        </Transitions>
                    </ContentControl.Transitions>
                </ContentControl>
            </DataTemplate>
        </sukiUi:SukiSideMenu.DataTemplates>

        <sukiUi:SukiSideMenu.Styles>
            <!--  Logo图标动画  -->
            <Style Selector="Image.AppIcon">
                <Setter Property="Transitions">
                    <Transitions>
                        <DoubleTransition Property="Opacity" Duration="0:0:0.2" />
                        <TransformOperationsTransition Property="RenderTransform" Duration="0:0:0.2" />
                    </Transitions>
                </Setter>
                <Setter Property="RenderTransformOrigin" Value="0.5,0.5" />
                <Style Selector="^:pointerover">
                    <Setter Property="Opacity" Value="0.8" />
                    <Setter Property="RenderTransform" Value="scale(1.05, 1.05)" />
                </Style>
            </Style>

            <!--  菜单项动画  -->
            <Style Selector="sukiUi|SukiSideMenuItem">
                <Setter Property="Transitions">
                    <Transitions>
                        <DoubleTransition Property="Opacity" Duration="0:0:0.2" />
                        <TransformOperationsTransition
                            Easing="CubicEaseOut"
                            Property="RenderTransform"
                            Duration="0:0:0.2" />
                    </Transitions>
                </Setter>
                <Style Selector="^:pointerover">
                    <Setter Property="RenderTransform" Value="translate(5px, 0px)" />
                </Style>
                <Style Selector="^:pressed">
                    <Setter Property="RenderTransform" Value="scale(0.98, 0.98)" />
                </Style>
            </Style>
        </sukiUi:SukiSideMenu.Styles>

        <sukiUi:SukiSideMenu.ItemTemplate>
            <DataTemplate>
                <sukiUi:SukiSideMenuItem
                    Classes="Compact"
                    Header="{Binding DisplayName}"
                    PageContent="{Binding PageContent}">
                    <sukiUi:SukiSideMenuItem.Icon>
                        <i:Icon FontSize="16" Value="{Binding Icon}" />
                    </sukiUi:SukiSideMenuItem.Icon>
                </sukiUi:SukiSideMenuItem>
            </DataTemplate>
        </sukiUi:SukiSideMenu.ItemTemplate>

        <sukiUi:SukiSideMenu.HeaderContent>
            <StackPanel Spacing="5">
                <Image
                    Width="80"
                    Height="80"
                    Margin="30,10,30,10"
                    Classes="AppIcon"
                    Source="avares://AvaBySuki/Assets/TestPng.png" />
                <TextBlock
                    Margin="0,0,0,10"
                    HorizontalAlignment="Center"
                    FontSize="16"
                    FontWeight="Bold"
                    Text="我的应用" />
            </StackPanel>
        </sukiUi:SukiSideMenu.HeaderContent>

        <sukiUi:SukiSideMenu.FooterContent>
            <StackPanel Margin="10" HorizontalAlignment="Center">
                <TextBlock
                    HorizontalAlignment="Center"
                    FontSize="12"
                    Opacity="0.6"
                    Text="© 2025 AvaBySuki" />
                <TextBlock
                    Margin="0,5,0,0"
                    HorizontalAlignment="Center"
                    FontSize="10"
                    Opacity="0.5"
                    Text="版本 1.0.0" />
            </StackPanel>
        </sukiUi:SukiSideMenu.FooterContent>
    </sukiUi:SukiSideMenu>
</sukiUi:SukiWindow>