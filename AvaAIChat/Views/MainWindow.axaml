<sukiUi:SukiWindow
    xmlns="https://github.com/avaloniaui"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:vm="using:AvaAIChat.ViewModels"
    xmlns:models="using:AvaAIChat.Models"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    xmlns:sukiUi="clr-namespace:SukiUI.Controls;assembly=SukiUI"
    xmlns:i="https://github.com/projektanker/icons.avalonia"
    mc:Ignorable="d"
    d:DesignWidth="800"
    d:DesignHeight="450"
    x:Class="AvaAIChat.Views.MainWindow"
    x:DataType="vm:MainWindowViewModel"
    Icon="/Assets/avalonia-logo.ico"
    Title="AvaAIChat"
    WindowState="Maximized"
    BackgroundStyle="Bubble">

    <sukiUi:SukiWindow.Hosts>
        <sukiUi:SukiDialogHost x:Name="DialogHost" />
        <sukiUi:SukiToastHost x:Name="ToastHost" />
    </sukiUi:SukiWindow.Hosts>

    <sukiUi:SukiWindow.RightWindowTitleBarControls>
        <Button Classes="WindowControlsButton">
            <i:Icon Value="mdi-cog" FontSize="16" />
            <Button.Flyout>
                <Flyout>
                    <Panel>
                        <Border Margin="20" BoxShadow="{DynamicResource SukiPopupShadow}" CornerRadius="20" />

                        <Border
                            MinWidth="350"
                            Margin="20"
                            Padding="10"
                            Background="{DynamicResource SukiCardBackground}"
                            BorderBrush="{DynamicResource SukiLightBorderBrush}"
                            BorderThickness="1"
                            ClipToBounds="True"
                            CornerRadius="15"
                            MinHeight="300">
                            <TextBlock Text="Flyout Content Here" FontSize="24" FontWeight="Bold" />
                        </Border>
                    </Panel>
                </Flyout>
            </Button.Flyout>
        </Button>
    </sukiUi:SukiWindow.RightWindowTitleBarControls>

    <sukiUi:SukiSideMenu IsSearchEnabled="True" ItemsSource="{Binding Pages}" SelectedItem="{Binding ActivePage}">
        
        <!--  定义如何渲染 PageInfo 的 PageContent  -->
        <sukiUi:SukiSideMenu.DataTemplates>
            <DataTemplate DataType="models:PageInfo">
                <ContentControl Content="{Binding PageContent}" />
            </DataTemplate>
        </sukiUi:SukiSideMenu.DataTemplates>
        
        <sukiUi:SukiSideMenu.Styles>
            <Style Selector="Image.AppIcon">
                <Setter Property="Transitions">
                    <Transitions>
                        <DoubleTransition Property="Opacity" Duration="0:0:0.1" />
                    </Transitions>
                </Setter>
                <Style Selector="^:pointerover">
                    <Setter Property="Opacity" Value="0.7" />
                </Style>
            </Style>
        </sukiUi:SukiSideMenu.Styles>

        <sukiUi:SukiSideMenu.ItemTemplate>
            <DataTemplate>
                <sukiUi:SukiSideMenuItem Classes="Compact" 
                                        Header="{Binding DisplayName}"
                                        PageContent="{Binding PageContent}">
                    <sukiUi:SukiSideMenuItem.Icon>
                        <i:Icon Value="{Binding Icon}" FontSize="16" />
                    </sukiUi:SukiSideMenuItem.Icon>
                </sukiUi:SukiSideMenuItem>
            </DataTemplate>
        </sukiUi:SukiSideMenu.ItemTemplate>

        <sukiUi:SukiSideMenu.HeaderContent>
            <StackPanel Spacing="5">
                <Image
                    Width="80"
                    Height="80"
                    Margin="30,10,30,10"
                    Classes="AppIcon"
                    Source="avares://AvaAIChat/Assets/TestPng.png" />
                <TextBlock
                    Text="我的应用"
                    FontSize="16"
                    FontWeight="Bold"
                    HorizontalAlignment="Center"
                    Margin="0,0,0,10" />
            </StackPanel>
        </sukiUi:SukiSideMenu.HeaderContent>

        <sukiUi:SukiSideMenu.FooterContent>
            <StackPanel HorizontalAlignment="Center" Margin="10">
                <TextBlock
                    Text="© 2025 AvaAIChat"
                    FontSize="12"
                    Opacity="0.6"
                    HorizontalAlignment="Center" />
                <TextBlock
                    Text="版本 1.0.0"
                    FontSize="10"
                    Opacity="0.5"
                    HorizontalAlignment="Center"
                    Margin="0,5,0,0" />
            </StackPanel>
        </sukiUi:SukiSideMenu.FooterContent>
    </sukiUi:SukiSideMenu>
</sukiUi:SukiWindow>